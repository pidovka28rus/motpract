-- Таблица типов материалов
CREATE TABLE MaterialType (
    MaterialTypeID INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    MaterialTypeName VARCHAR(100) NOT NULL UNIQUE,
    PercentageDefectiveMaterial DECIMAL(5,4)
);

-- Таблица материалов
CREATE TABLE Material (
      MaterialID INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    MaterialName VARCHAR(255) NOT NULL UNIQUE,
    MaterialTypeID INT REFERENCES MaterialType(MaterialTypeID),
    PricePerUnit DECIMAL(15,2),
    InStockQuantity DECIMAL(10,2) DEFAULT 0,
    MinimumStockLevel DECIMAL(10,2) DEFAULT 0,
    QuantityPerPack DECIMAL(10,2),
    UnitOfMeasure VARCHAR(20)
);

-- Таблица типов продукции
CREATE TABLE ProductType (
    ProductTypeID INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    ProductTypeName VARCHAR(100) NOT NULL UNIQUE,
    ProductTypeCoefficient DECIMAL(10,2)
);

-- Таблица продукции
CREATE TABLE Product (
    ProductID INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    ProductName VARCHAR(255) NOT NULL UNIQUE,
    ProductArticle VARCHAR(7) NOT NULL UNIQUE,
    MinimumCostForPartner DECIMAL(15,2),
    ProductTypeID INT REFERENCES ProductType(ProductTypeID)
    
);

-- Таблица связи "материал – продукция"
CREATE TABLE MaterialProductUsage (
    UsageID INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    MaterialID INT REFERENCES Material(MaterialID),
    ProductID INT REFERENCES Product(ProductID),
    RequiredQuantity DECIMAL(10,2)
);
