СОЗДАНИЕ ПАПКИ И РАЗРЕШЕНИЕ СОХРАНЕНИЯ БАЗЫ
sudo mkdir /db
sudo chown reddatabase /db

СОЗДАНИЕ БАЗЫ ДАННЫХ
Создать базу данных >
Имя подключения: DemoConnection
Файл базы данных: /db/demo.fdb
Имя пользователя: sysdba
Пароль: пароль администратора
Create > Connect


СОЗДАНИЕ ТАБЛИЦ
CREATE TABLE PRODUCT_TYPE (
    PRODUCT_TYPE_ID INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    PRODUCT_TYPE_NAME VARCHAR(100),
    PRODUCT_TYPE_COEFFICIENT DECIMAL(10,2)
);

CREATE TABLE MATERIAL_TYPE (
    MATERIAL_TYPE_ID INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    MATERIAL_TYPE_NAME VARCHAR(100),
    PERCENTAGE_DEFECTIVE_MATERIAL DECIMAL(5,4)
);

CREATE TABLE PARTNER_TYPE (
    PARTNER_TYPE_ID INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    PARTNER_TYPE_NAME VARCHAR(100)
);

CREATE TABLE PRODUCT (
    PRODUCT_ARTICLE VARCHAR(7) PRIMARY KEY,
    PRODUCT_NAME VARCHAR(150),
    MINIMUM_COST_FOR_PARTNER DECIMAL(15,2),
    PRODUCT_TYPE INT,
    FOREIGN KEY (PRODUCT_TYPE) REFERENCES PRODUCT_TYPE(PRODUCT_TYPE_ID)
);

CREATE TABLE PARTNER (
    PARTNER_ID INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    PARTNER_NAME VARCHAR(100),
    DIRECTOR VARCHAR(100),
    DIRECTOR_MAIL VARCHAR(100),
    DIRECTOR_PHONE VARCHAR(25),
    PARTNER_LEGAL_ADDRESS VARCHAR(150),
    PARTNER_INN VARCHAR(100),
    PARTNER_RATING INT,
    PARTNER_TYPE INT,
    FOREIGN KEY (PARTNER_TYPE) REFERENCES PARTNER_TYPE(PARTNER_TYPE_ID)
);

CREATE TABLE SALE (
    SALE_ID INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    PRODUCT_ARTICLE VARCHAR(7),
    PARTNER INT,
    PRODUCT_COUNT INT,
    SALE_DATE DATE,
    FOREIGN KEY (PARTNER) REFERENCES PARTNER(PARTNER_ID),
    FOREIGN KEY (PRODUCT_ARTICLE) REFERENCES PRODUCT(PRODUCT_ARTICLE)
);

CREATE TABLE PRODUCT_MATERIAL_TYPE (
    PRODUCT_MATERIAL_TYPE_ID INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    PRODUCT VARCHAR(7),
    MATERIAL_TYPE INT,
    FOREIGN KEY (PRODUCT) REFERENCES PRODUCT(PRODUCT_ARTICLE),
    FOREIGN KEY (MATERIAL_TYPE) REFERENCES MATERIAL_TYPE(MATERIAL_TYPE_ID)
);

Импорт данных в таблицы

1.	После импорта данных (Product_type_import) в таблицу PRODUCT_TYPE нужно перейти в таблицу и удалить 2 пустых столбца:
 

2.	Далее импортируем данные (Material_type_import) в таблицу MATERIAL_TYPE без изменений в файле
3.	После импортируем данные (product_import) в таблицу PRODUCT. Нужно изменить содержимое файла. «Тип продукции меняем с названия на его id, который был присвоен автоматически при импорте в таблицу PRODUCT_TYPE. Таблицу артикул меняем с типа int, на строковый.
 
4.	В таблице Partner_type, данные заполняем вручную исходя из данных в excel – файла Partners_import
 
И после заполнения данных, в excel – файл Partners_import, заменяем тип партнёра на подходящий по номеру id
 
5.	В таблицу Sale импортируем excel – файл Partner_product_import. Для этого нужно изменить файл следующим образом

 


ER-МОДЕЛЬ
Инструменты > Редактор ER-модели > Реверс инженеринг > Все таблицы > Создать
